<!-- templates/partials/jobs_list.html -->
<div class="overflow-hidden bg-white shadow rounded-lg border border-gray-100 text-sm text-gray-700">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50 text-xs uppercase text-gray-500 font-semibold tracking-wider">
      <tr>
        <th class="px-4 py-3 text-left">Name</th>
        <th class="px-4 py-3 text-left">Betreff</th>
        <th class="px-4 py-3 text-left">Selektion</th>
        <th class="px-4 py-3 text-left">Gruppe</th>
        <th class="px-4 py-3 text-left">Template</th>
        <th class="px-4 py-3 text-left">Zeitplan</th>
        <th class="px-4 py-3 text-center">BCC</th>
        <th class="px-4 py-3 text-center">Aktionen</th>
      </tr>
    </thead>

    <tbody class="divide-y divide-gray-100">
      {% for job in jobs %}
      <tr class="hover:bg-gray-50 transition">
        <!-- Name -->
        <td class="px-4 py-3 font-medium text-gray-900">{{ job.name }}</td>

        <!-- Betreff -->
        <td class="px-4 py-3 leading-snug whitespace-normal">{{ job.subject or "â€“" }}</td>

        <!-- Selektion (ohne Icons) -->
        <td class="px-4 py-3">
          {% if job.selection == "birthdate" %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-pink-100 text-pink-800 text-xs font-medium">
              Geburtstag
            </span>
          {% elif job.selection == "entry" %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs font-medium">
              Eintritt
            </span>
          {% elif job.selection == "all" %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-xs font-medium">
              Alle
            </span>
          {% else %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 text-xs font-medium">
              â€“
            </span>
          {% endif %}
        </td>

        <!-- Gruppe -->
        <td class="px-4 py-3">{{ job.group_name or "â€“" }}</td>

        <!-- Template -->
        <td class="px-4 py-3">
          <div>{{ job.template.name if job.template else "â€“" }}</div>
          {% if job.round_template %}
            <div class="text-xs text-gray-500">Runde: {{ job.round_template.name }}</div>
          {% endif %}
        </td>

        <!-- Zeitplan -->
        <td class="px-4 py-3 text-gray-600 whitespace-nowrap">
          {% if job.cron_human %}
            {{ job.cron_human }}
          {% elif job.once_at_local %}
            Einmalig am {{ job.once_at_local.strftime('%d.%m.%Y %H:%M') }}
          {% elif job.once_at %}
            Einmalig am {{ job.once_at.strftime('%d.%m.%Y %H:%M') }}
          {% else %}
            <span class="text-gray-400">â€“</span>
          {% endif %}
        </td>

        <!-- BCC -->
        <td class="px-4 py-3 text-center">
          {% if job.bcc_address %}
            <span class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-gray-100 text-gray-700 text-3xl shadow-sm"
                  title="{{ job.bcc_address }}">
              ðŸ“§
            </span>
          {% else %}
            <span class="text-gray-300">â€“</span>
          {% endif %}
        </td>

        <!-- Aktionen -->
        <td class="px-4 py-3 text-center">
  <div class="flex flex-col items-stretch gap-2 w-28 mx-auto">
    <!-- Logs -->
    <button
      hx-get="/htmx/jobs/{{ job.id }}/logs"
      hx-target="body"
      hx-swap="beforeend"
      class="inline-flex justify-center items-center px-3 py-1.5 rounded bg-teal-600 hover:bg-teal-700 text-white text-xs font-medium shadow-sm transition">
      Logs
    </button>

    <!-- Bearbeiten -->
    <a href="/jobs/{{ job.id }}/edit"
       class="inline-flex justify-center items-center px-3 py-1.5 rounded bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium shadow-sm transition">
      Bearbeiten
    </a>

    <!-- LÃ¶schen -->
    <button
      type="button"
      hx-confirm="Willst du diesen Job wirklich lÃ¶schen?"
      hx-delete="/htmx/jobs/{{ job.id }}"
      hx-target="#jobs-list"
      hx-swap="innerHTML"
      class="inline-flex justify-center items-center px-3 py-1.5 rounded bg-red-600 hover:bg-red-700 text-white text-xs font-medium shadow-sm transition">
      LÃ¶schen
    </button>
  </div>
</td>



      </tr>
      {% else %}
      <tr>
        <td colspan="8" class="text-center py-6 text-gray-400">Keine Jobs vorhanden</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
